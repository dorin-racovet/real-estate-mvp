# Story 1.2: Database Models and Configuration

**Epic:** 1. Foundation & Authentication
**Status:** Done

## Story Statement
As a developer, I want SQLAlchemy models for User and Property entities, so that the application has a data persistence layer.

## Acceptance Criteria
1. SQLAlchemy 2.0 configured with SQLite database
2. User model with fields: id, email (unique), password_hash, name, phone, role (enum: agent/admin), created_at
3. Property model with fields: id, title, price, surface, city, street, address, property_type, bedrooms, bathrooms, description, images (JSON array), status (enum: draft/published), agent_id (FK), created_at, updated_at
4. Database migrations strategy documented (Alembic optional for MVP)
5. Database file created at `backend/data/realestate.db`
6. Seed script creates initial admin user (email: admin@realestate.pro, password: admin123)
7. Models include proper relationships (User has many Properties)

## Dev Notes
- **Database Configuration**:
    - Use `sqlite+aiosqlite` for async support.
    - Configuration location: `app/core/db/database.py`.
    - Engine creation: `create_async_engine(settings.DATABASE_URL)`.
    - Session dependency: `async_get_db`. [Source: architecture/10-core-configuration.md]
- **Models**:
    - Location: `app/models/`.
    - **User Model** (`app/models/user.py`):
        - Enums: `UserRole` (agent, admin).
        - Relationship: `properties` (back_populates="agent", lazy="noload"). [Source: architecture/4-database-models.md]
    - **Property Model** (`app/models/property.py`):
        - Enums: `PropertyType` (house, apartment, etc.), `PropertyStatus` (draft, published).
        - JSON Column for `images`.
        - Foreign Key: `agent_id` -> `users.id`. [Source: architecture/4-database-models.md]
- **Seeding**:
    - Create `backend/scripts/seed.py` to initialize the database and create the admin user.
    - Admin credentials should verify against `settings.ADMIN_EMAIL` / `settings.ADMIN_PASSWORD`.

## Tasks
- [ ] Install `aiosqlite` (async driver)
- [ ] **Database Core**:
    - [ ] Create `app/core/db/__init__.py`
    - [ ] Implement `app/core/db/database.py` with engine and session maker
- [ ] **Models**:
    - [ ] Create `app/models/__init__.py` (export User, Property)
    - [ ] Implement `app/models/user.py` with `User` class and `UserRole` enum
    - [ ] Implement `app/models/property.py` with `Property` class and Enums
- [ ] **Seeds & Data**:
    - [ ] Create `backend/data` directory
    - [ ] Implement `scripts/seed.py` (async script to create tables and proper admin user)
    - [ ] Run seed script to verify DB creation
